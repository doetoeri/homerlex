<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <!-- 모바일 최적화를 위한 meta 태그 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>텍스트 버튼 기능 예제</title>
  <style>
    /* Pretendard 또는 원하는 글꼴을 사용해주세요.
       여기서는 웹 안전 글꼴로 예시합니다. */
    body {
      font-family: 'Pretendard', sans-serif;
      background-color: #f0f0f0;
      margin: 20px;
      color: #333;
    }
    
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    
    /* 편집 영역 (내용 입력창) – 불필요한 상하 공백 제거 */
    .editor {
      border: 1px solid #ccc;
      background-color: #fff;
      /* 상하 패딩을 0으로 지정하여 맨 위/아래에 추가 공백을 제거 */
      padding-top: 0;
      padding-bottom: 0;
      padding-left: 10px;
      padding-right: 10px;
      min-height: 200px;
      /* inner <p> 태그들의 기본 margin도 제거 */
    }
    .editor p {
      margin: 0;
      /* 단, 각 줄 사이에 한 줄 간격(예: line-height를 1.2~1.4 정도)으로 하고 싶다면 */
      line-height: 1.4;
    }
    
    /* 변환 후 생성될 텍스트 버튼 스타일 */
    .text-button {
      background-color: #0078D4;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 1rem;
      margin: 2px 0; /* 각 버튼은 위아래로 약간의 간격만 존재 */
    }
    
    /* 선택된 텍스트를 변환하는 버튼 스타일 */
    .convert-btn {
      display: block;
      margin: 20px auto;
      padding: 8px 16px;
      background-color: #0078D4;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <h1>텍스트 버튼 기능 예제</h1>
  <!-- 내용 편집 영역 -->
  <div class="editor" contenteditable="true">
    <p>여기에 텍스트를 입력하세요.</p>
  </div>
  
  <!-- 변환 버튼: 선택한 텍스트를 각 줄마다 버튼 요소로 변환 -->
  <button class="convert-btn" id="convertBtn">텍스트 버튼 변환</button>
  
  <script>
    // "텍스트 버튼 변환" 버튼 클릭 이벤트 핸들러
    document.getElementById('convertBtn').addEventListener('click', function() {
      var selection = window.getSelection();
      if (selection.rangeCount === 0) return;
      
      var range = selection.getRangeAt(0);
      var selectedText = range.toString();
      
      if (selectedText.trim() === "") return;

      // 선택한 텍스트를 줄바꿈(\n)을 기준으로 분리
      var lines = selectedText.split(/\n/);
      var fragment = document.createDocumentFragment();

      lines.forEach(function(line) {
        // 빈 줄은 무시합니다.
        if (line.trim() === "") return;
        
        var btn = document.createElement('button');
        btn.className = 'text-button';
        btn.textContent = line;
        fragment.appendChild(btn);
        // 각 버튼 뒤에 줄바꿈을 위한 <br> 추가 (원하는 경우)
        fragment.appendChild(document.createElement('br'));
      });
      
      // 선택된 영역의 기존 내용을 삭제하고 새로 생성된 fragment를 삽입
      range.deleteContents();
      range.insertNode(fragment);
      // 선택 영역 초기화
      selection.removeAllRanges();
    });
  </script>
</body>
</html>
