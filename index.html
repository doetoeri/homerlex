<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Homerlex</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard/dist/web/static/pretendard.css">
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background: linear-gradient(135deg, #e0e5ec, #f0f0f3);
      margin: 0;
      padding: 20px;
    }
    /* 제목 입력 필드 */
    .title-input {
      width: 100%;
      font-size: 24px;
      font-weight: 600;
      text-align: center;
      border: none;
      outline: none;
      background: transparent;
      padding: 10px;
      margin-bottom: 10px;
      border-bottom: 2px solid #bbb;
    }
    /* 툴바 중앙 정렬 */
    .toolbar {
      display: flex;
      gap: 10px;
      margin: 0 auto 20px auto;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
    }
    .toolbar button {
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      background: #e0e5ec;
      box-shadow: 5px 5px 10px #a3b1c6, -5px -5px 10px #ffffff;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      outline: none;
      transition: box-shadow 0.2s ease;
    }
    .toolbar button:hover {
      box-shadow: inset 5px 5px 10px #a3b1c6, inset -5px -5px 10px #ffffff;
    }
    .toolbar input[type="color"], .toolbar select {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 50%;
      padding: 0;
      cursor: pointer;
      background: transparent;
    }
    .editor {
      width: 100%;
      height: 400px;
      border: none;
      border-radius: 20px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      box-shadow: inset 5px 5px 10px #a3b1c6, inset -5px -5px 10px #ffffff;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      overflow: auto;
      position: relative;
      font-size: 16px;
      line-height: 1.8;
    }
    /* 기본 Highlight 스타일 */
    .highlight {
      border-radius: 8px;
      padding: 2px 4px;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      position: relative;
      font-weight: 600;
    }
  </style>
</head>
<body>

  <!-- 제목 입력 필드 -->
  <input type="text" class="title-input" placeholder="제목을 입력하세요...">

  <!-- 툴바 -->
  <div class="toolbar">
    <button id="btnBold" title="Bold (Ctrl+B)">Bold</button>
    <button id="btnUnderline" title="Underline (Ctrl+U)">Underline</button>
    <button id="btnIncreaseFont" title="Increase Font Size (Ctrl + +)">A+</button>
    <button id="btnDecreaseFont" title="Decrease Font Size (Ctrl + -)">A-</button>
    <button id="btnHighlight" title="Highlight (Ctrl+H)">Highlight</button>
    <button id="btnRemoveHighlight" title="Remove Highlight (Ctrl+R)">Remove</button>
    <input type="color" id="textColor" title="Text Color (Ctrl+T)" value="#007AFF">
    <button id="btnUndo" title="Undo (Ctrl+Z)">Undo</button>
    <button id="btnRedo" title="Redo (Ctrl+Y)">Redo</button>
  </div>

  <!-- 본문 -->
  <div class="editor" contenteditable="true" id="editor">
    여기에 메모를 입력하세요...
  </div>

  <script>
    function applyHighlight() {
      const selection = window.getSelection();
      if (selection.isCollapsed) return;
      const range = selection.getRangeAt(0);
      let container = range.commonAncestorContainer;
      if (container.nodeType === Node.TEXT_NODE) {
        container = container.parentElement;
      }
      if (container && container.classList.contains('highlight')) {
        selection.removeAllRanges();
        return;
      }
      const span = document.createElement('span');
      span.className = 'highlight';
      span.style.backgroundColor = document.getElementById('textColor').value;
      span.style.color = "#000";
      span.style.fontWeight = "600";
      span.appendChild(range.extractContents());
      range.insertNode(span);
      selection.removeAllRanges();
    }

    function removeHighlight() {
      const selection = window.getSelection();
      if (selection.isCollapsed) return;
      const range = selection.getRangeAt(0);
      let container = range.commonAncestorContainer;
      if (container.nodeType === Node.TEXT_NODE) {
        container = container.parentElement;
      }
      if (container && container.classList.contains('highlight')) {
        const parent = container.parentNode;
        while (container.firstChild) {
          parent.insertBefore(container.firstChild, container);
        }
        parent.removeChild(container);
        selection.removeAllRanges();
      }
    }

    document.getElementById('textColor').addEventListener('change', function() {
      document.execCommand('foreColor', false, this.value);
    });

    document.getElementById('btnIncreaseFont').addEventListener('click', function() {
      document.execCommand('increaseFontSize', false, null);
    });

    document.getElementById('btnDecreaseFont').addEventListener('click', function() {
      document.execCommand('decreaseFontSize', false, null);
    });

    document.getElementById('btnBold').addEventListener('click', () => document.execCommand('bold'));
    document.getElementById('btnUnderline').addEventListener('click', () => document.execCommand('underline'));
    document.getElementById('btnHighlight').addEventListener('click', applyHighlight);
    document.getElementById('btnRemoveHighlight').addEventListener('click', removeHighlight);
    document.getElementById('btnUndo').addEventListener('click', () => document.execCommand('undo'));
    document.getElementById('btnRedo').addEventListener('click', () => document.execCommand('redo'));

  </script>
</body>
</html>
